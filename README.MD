# ğŸŒ¿ EcoRide

EcoRide est une application web de covoiturage Ã©cologique dÃ©veloppÃ©e dans le cadre dâ€™un projet d'Ã©valuation en cours de formation. Ce projet fullstack vise Ã  mettre en Å“uvre une application complÃ¨te, de la maquette au dÃ©ploiement, en validant des compÃ©tences en front-end, back-end, base de donnÃ©es, gestion de projet, sÃ©curitÃ© et dÃ©ploiement.

## ğŸ“‘ Table des matiÃ¨res

- [ğŸ“ Contexte du projet](#-contexte-du-projet)
- [ğŸŒ PrÃ©sentation dâ€™EcoRide](#-prÃ©sentation-decoride)
- [ğŸ—‚ï¸ User Stories complÃ¨tes](#ï¸-user-stories-complÃ¨tes)
- [âš™ï¸ Stack technique](#-stack-technique)
- [ğŸ–¥ï¸ Environnement de dÃ©veloppement local (simurghserver)](#ï¸-environnement-de-dÃ©veloppement-local-simurghserver)
- [ğŸ“¦ Structure Git](#-structure-git)
- [ğŸš€ Guide de dÃ©ploiement local](#-guide-de-dÃ©ploiement-local)
- [ğŸ“ Livrables attendus](#-livrables-attendus)

## ğŸ“ Contexte du projet

Ce projet est dÃ©veloppÃ© dans le cadre de la certification Graduate DÃ©veloppeur Fullstack chez Studi.  
Il permet de valider deux grands types dâ€™activitÃ©s :

### ActivitÃ© â€“ Type 1 : Front-End
- Installer et configurer son environnement de travail
- Maquetter des interfaces utilisateur
- RÃ©aliser des interfaces statiques
- DÃ©velopper des interfaces dynamiques

### ActivitÃ© â€“ Type 2 : Back-End
- Mise en place de bases SQL & NoSQL
- DÃ©veloppement des composants mÃ©tiers cÃ´tÃ© serveur
- Documentation du dÃ©ploiement

## ğŸŒ PrÃ©sentation dâ€™EcoRide

La startup EcoRide souhaite devenir la rÃ©fÃ©rence en covoiturage Ã©cologique.  
L'application doit permettre de rÃ©server ou proposer un covoiturage en voiture, avec une attention particuliÃ¨re Ã  la rÃ©duction dâ€™empreinte carbone.  
JosÃ©, directeur technique de lâ€™entreprise, souhaite une application web aux couleurs de lâ€™Ã©cologie. Seuls les trajets en voiture sont autorisÃ©s.

## ğŸ—‚ï¸ User Stories complÃ¨tes

### US 1 : Page dâ€™accueil  
**Visiteur**  
- PrÃ©sentation de lâ€™entreprise + images  
- Barre de recherche dâ€™itinÃ©raire  
- Footer avec email + lien vers mentions lÃ©gales

### US 2 : Menu de lâ€™application  
**Visiteur**  
- AccÃ¨s rapide : page dâ€™accueil, covoiturages, connexion, contact

### US 3 : Vue des covoiturages  
**Visiteur**  
- Recherche par ville + date  
- Affiche les trajets disponibles : pseudo, photo, note, prix, horaires, nombre de places restantes  
- Mentionne si le voyage est Ã©cologique (voiture Ã©lectrique)  
- Si aucun trajet : suggÃ©rer date alternative  
- Bouton Â« dÃ©tail Â» pour chaque trajet

### US 4 : Filtres des covoiturages  
**Visiteur**  
- Filtres : type de vÃ©hicule (Ã©lectrique), prix max, durÃ©e max, note minimale

### US 5 : Vue dÃ©taillÃ©e dâ€™un covoiturage  
**Visiteur, Utilisateur**  
- Affiche tous les dÃ©tails du trajet sÃ©lectionnÃ©  
- Infos vÃ©hicule, prÃ©fÃ©rences conducteur, avis utilisateurs

### US 6 : Participer Ã  un covoiturage  
**Visiteur, Utilisateur**  
- Si non connectÃ© : rediriger vers login / crÃ©ation de compte  
- Si connectÃ© : bouton Â« participer Â»  
- Double confirmation â†’ retrait de crÃ©dits  
- Maj places restantes + historique utilisateur + enregistrement du trajet

### US 7 : CrÃ©ation de compte  
**Visiteur**  
- Saisie : pseudo, mail, mot de passe sÃ©curisÃ©  
- Compte crÃ©ditÃ© de 20 crÃ©dits Ã  la crÃ©ation

### US 8 : Espace utilisateur  
**Utilisateur**  
- Choix du rÃ´le : passager, chauffeur, les deux  
- Chauffeur : ajout vÃ©hicule(s), prÃ©fÃ©rences (fumeur, animauxâ€¦), nombre de places  
- Passager : aucun champ requis spÃ©cifique

### US 9 : Saisir un voyage  
**Utilisateur**  
- Chauffeur : saisie dÃ©part/arrivÃ©e, sÃ©lection vÃ©hicule, prix  
- 2 crÃ©dits prÃ©levÃ©s par la plateforme  
- PossibilitÃ© dâ€™utiliser un vÃ©hicule existant ou dâ€™en ajouter un nouveau

### US 10 : Historique des covoiturages  
**Utilisateur**  
- Visualisation des trajets passÃ©s  
- PossibilitÃ© dâ€™annuler une rÃ©servation  
- Maj crÃ©dits et places disponibles  
- Si chauffeur annule â†’ mail aux passagers

### US 11 : DÃ©marrer et arrÃªter un covoiturage  
**Utilisateur**  
- Chauffeur : bouton Â« dÃ©marrer Â» puis Â« arrivÃ©e Ã  destination Â»  
- Passagers notifiÃ©s par mail  
- PossibilitÃ© de valider / noter le trajet  
- Maj des crÃ©dits chauffeur aprÃ¨s validation  
- Commentaire possible si trajet mal passÃ© â†’ remontÃ©e Ã  un employÃ©

### US 12 : Espace employÃ©  
**EmployÃ©**  
- Valide ou rejette les avis utilisateurs  
- AccÃ¨s aux trajets litigieux : noms, mails, rÃ©sumÃ© du trajet

### US 13 : Espace administrateur  
**Administrateur**  
- CrÃ©ation comptes employÃ©s  
- AccÃ¨s aux statistiques : trajets/jour, crÃ©dits gagnÃ©s  
- Nombre total de crÃ©dits de la plateforme  
- PossibilitÃ© de suspendre comptes (utilisateurs / employÃ©s)

## âš™ï¸ Stack technique

- **Frontend** : HTML, CSS, JavaScript
- **Backend** : PHP avec PDO
- **Base SQL** : MariaDB
- **Base NoSQL** : MongoDB
- **DÃ©ploiement** : Heroku
- **Autres** : Apache2, Nginx, PM2, Mongo Express, phpMyAdmin, GitHub, VS Code

## ğŸ–¥ï¸ Environnement de dÃ©veloppement local (simurghserver)

### Informations gÃ©nÃ©rales

- Serveur local : HP EliteDesk 800 G1 USDT
- OS : Ubuntu Server 24.04.2 LTS
- IP locale : 192.168.1.112
- DNS local : `dev.local`, `api.local`, `mongo.local`
- AccÃ¨s SSH : alias `serveur` depuis le Mac

### RÃ©pertoires montÃ©s automatiquement sur macOS

- `/srv/samba/NAS` â†’ `~/NAS`
- `/srv/dev` â†’ `~/dev`

### Script de montage automatique

- `~/scripts/mount-all.sh`
- AutomatisÃ© via `launchd`
- Alias : `monter`, raccourci Automator : â€œMonter Devâ€

### Services installÃ©s

- Apache2 (port 8080)
- PHP 8.3 + phpMyAdmin
- MariaDB 10.11
- MongoDB 7.0
- Mongo Express (via PM2) â†’ accessible via `mongo.local`
- Extension PHP MongoDB installÃ©e (via PECL) et activÃ©e pour Apache et CLI
- TestÃ©e avec `php -m` et intÃ©grÃ©e dans `/etc/php/8.3/cli/conf.d/30-mongodb.ini`
- BibliothÃ¨que MongoDB PHP (`mongodb/mongodb`) installÃ©e via Composer
- Fichier `vendor/autoload.php` gÃ©nÃ©rÃ© et utilisÃ© dans `detail-trajet.php`
- AccÃ¨s MongoDB fonctionnel dans les scripts PHP (testÃ©)
- SchÃ©ma flexible pour permettre Ã©volution du contenu (note, commentaire, date, etc.)
- Node.js + PM2
- NGINX pour reverse proxy

### Exemple de configuration rÃ©seau (Nginx â‡¨ Apache)

```nginx
server {
    listen 80;
    server_name dev.local;

    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

## ğŸ“¦ Structure Git

- `main` : branche principale (stable)
- `develop` : branche de dÃ©veloppement continue
- `feature/*` : une branche par fonctionnalitÃ©
- Processus : merge `feature` â†’ `develop`, puis `develop` â†’ `main`

## ğŸš€ Guide de dÃ©ploiement local

### PrÃ©requis

- Serveur Linux (ou poste local avec Apache/PHP/MariaDB/MongoDB)
- PHP 8.3 avec les extensions nÃ©cessaires (PDO, etc.)
- Apache2 ou NGINX
- MariaDB
- MongoDB
- Node.js (pour Mongo Express ou outils complÃ©mentaires)
- Git
- Navigateur moderne
- Ã‰diteur de code (recommandÃ© : VS Code)

---

### Ã‰tapes de dÃ©ploiement local

1. **Cloner le dÃ©pÃ´t**
   ```bash
   git clone https://github.com/Simurgh-fr/ecoride.git
   cd ecoride
   ```

2. **Configurer les fichiers**
   - Copier `.env.example` en `.env` si disponible
   - Adapter les paramÃ¨tres de connexion Ã  MariaDB et MongoDB

3. **CrÃ©er les bases de donnÃ©es**
   - Importer les fichiers SQL depuis le dossier `/database` dans phpMyAdmin ou via terminal :
     ```bash
     mysql -u root -p < database/schema.sql
     ```

4. **Configurer Apache ou NGINX**
   - CrÃ©er un VirtualHost pour `dev.local` pointant vers `/var/www/html/ecoride/public`
   - Exemple de bloc disponible dans ce README (section serveur local)

5. **Lancer le serveur Mongo Express (si utilisÃ©)**
   ```bash
   pm2 start mongo-express --env production
   ```

6. **AccÃ©der Ã  lâ€™application**
   - Frontend : http://dev.local/
   - Mongo Express : http://mongo.local/
   - phpMyAdmin : http://dev.local/phpmyadmin/

---

### âš ï¸ Remarques

- Il est recommandÃ© de forcer lâ€™usage de HTTPS en production
- Modifier les permissions si nÃ©cessaire :
  ```bash
  sudo chown -R www-data:www-data /var/www/html/ecoride
  ```

- VÃ©rifier les erreurs Apache dans :
  ```
  /var/log/apache2/dev_error.log
  ```

## ğŸ“ Livrables attendus

- Lien GitHub public avec structure propre : https://github.com/Simurgh-fr/ecoride
- Application dÃ©ployÃ©e (Heroku ou local)
- Script SQL de crÃ©ation + donnÃ©es
- Manuel utilisateur PDF
- Charte graphique PDF
- Maquettes (3 desktop + 3 mobile) : https://www.figma.com/design/2SDtNrWyZWaNvcy8jQDEqw/Ecoride?node-id=0-1&t=Q8w9yJy17FgxAFdG-1
- Documentations technique & projet
- Kanban : Trello : https://trello.com/b/XPbiYwfv/ecoride
- IntÃ©gration SQL + NoSQL documentÃ©e dans le README